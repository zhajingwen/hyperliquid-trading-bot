# Hyperliquid DEX ç½‘æ ¼äº¤æ˜“æœºå™¨äºº

<div align="center">

**ä¸“ä¸šçº§è‡ªåŠ¨åŒ–ç½‘æ ¼äº¤æ˜“ç³»ç»Ÿ for [Hyperliquid DEX](https://hyperliquid.xyz)**

[![Python](https://img.shields.io/badge/Python-3.13+-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Hyperliquid](https://img.shields.io/badge/Hyperliquid-DEX-orange.svg)](https://hyperliquid.xyz)

</div>

> âš ï¸ **é£é™©æç¤º**
>
> æœ¬è½¯ä»¶ä»…ä¾›æ•™è‚²å’Œç ”ç©¶ç›®çš„ä½¿ç”¨ã€‚äº¤æ˜“åŠ å¯†è´§å¸æ¶‰åŠé‡å¤§æŸå¤±é£é™©ã€‚åˆ‡å‹¿ä½¿ç”¨æ— æ³•æ‰¿å—æŸå¤±çš„èµ„é‡‘è¿›è¡Œäº¤æ˜“ã€‚åœ¨å®ç›˜éƒ¨ç½²ä¹‹å‰ï¼Œè¯·åŠ¡å¿…åœ¨æµ‹è¯•ç½‘ä¸Šå……åˆ†æµ‹è¯•ç­–ç•¥ã€‚

---

## ğŸ“‘ ç›®å½•

- [æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [é¡¹ç›®æ¶æ„](#-é¡¹ç›®æ¶æ„)
- [é…ç½®ç³»ç»Ÿ](#ï¸-é…ç½®ç³»ç»Ÿ)
- [ç½‘æ ¼äº¤æ˜“ç­–ç•¥](#-ç½‘æ ¼äº¤æ˜“ç­–ç•¥è¯¦è§£)
- [é£é™©ç®¡ç†](#ï¸-é£é™©ç®¡ç†)
- [å­¦ä¹ ç¤ºä¾‹](#-å­¦ä¹ ç¤ºä¾‹)
- [APIå‚è€ƒ](#-apiå‚è€ƒ)
- [å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)
- [æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)
- [å®‰å…¨æœ€ä½³å®è·µ](#-å®‰å…¨æœ€ä½³å®è·µ)
- [è·¯çº¿å›¾](#ï¸-è·¯çº¿å›¾)
- [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ äº¤æ˜“åŠŸèƒ½
- **ç°è´§äº¤æ˜“** - ç›´æ¥èµ„äº§æŒæœ‰ï¼ˆç°é‡‘äº¤æ˜“ï¼‰
- **æ°¸ç»­åˆçº¦** - æ æ†è¡ç”Ÿå“äº¤æ˜“
- **ç½‘æ ¼äº¤æ˜“ç­–ç•¥** - è·¨ä»·æ ¼åŒºé—´çš„è‡ªåŠ¨åŒ–ä¹°å–è®¢å•
- **å®æ—¶å¸‚åœºæ•°æ®** - WebSocketä»·æ ¼æ¨é€å’Œè®¢å•ç°¿æ•°æ®

### ğŸ›¡ï¸ é£é™©ç®¡ç†
- **æ­¢æŸ/æ­¢ç›ˆ** - è‡ªåŠ¨æŒä»“é€€å‡º
- **å›æ’¤é™åˆ¶** - è´¦æˆ·çº§åˆ«æŸå¤±ä¿æŠ¤
- **ä»“ä½å¤§å°æ§åˆ¶** - é˜²æ­¢è¿‡åº¦æš´éœ²
- **ç½‘æ ¼å†å¹³è¡¡** - ä»·æ ¼èŒƒå›´è‡ªé€‚åº”

### ğŸ—ï¸ æ¶æ„ä¼˜åŠ¿
- **SOLIDåŸåˆ™** - æ¸…æ™°çš„èŒè´£åˆ†ç¦»
- **æ¥å£é©±åŠ¨** - æ˜“äºæ‰©å±•æ–°äº¤æ˜“æ‰€
- **äº‹ä»¶é©±åŠ¨** - é«˜æ•ˆçš„å¼‚æ­¥å¤„ç†
- **é…ç½®åŒ–** - YAMLé…ç½®ï¼Œæ— éœ€ä¿®æ”¹ä»£ç 

### ğŸ“Š ç›‘æ§ä¸åˆ†æ
- **èµ„é‡‘è´¹ç‡ç›‘æ§** - æ°¸ç»­åˆçº¦æˆæœ¬è·Ÿè¸ª
- **æ€§èƒ½æŒ‡æ ‡** - å®æ—¶ç›ˆäºå’Œæ‰§è¡Œç»Ÿè®¡
- **ç»“æ„åŒ–æ—¥å¿—** - å®Œæ•´çš„å®¡è®¡è·Ÿè¸ª

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

1. **Python 3.13+** - ç¡®ä¿å·²å®‰è£…æœ€æ–°ç‰ˆæœ¬Python
2. **[uvåŒ…ç®¡ç†å™¨](https://github.com/astral-sh/uv)** - å¿«é€Ÿã€å¯é çš„ä¾èµ–ç®¡ç†
3. **Hyperliquidæµ‹è¯•ç½‘è´¦æˆ·** - ä»[Chainstackæ°´é¾™å¤´](https://faucet.chainstack.com/hyperliquid-testnet-faucet)è·å–æµ‹è¯•èµ„é‡‘

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/chainstacklabs/hyperliquid-trading-bot
cd hyperliquid-trading-bot

# 2. å®‰è£…ä¾èµ–
uv sync

# 3. è®¾ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„æµ‹è¯•ç½‘ç§é’¥
```

### ç¯å¢ƒé…ç½®

åˆ›å»º`.env`æ–‡ä»¶å¹¶é…ç½®ï¼š

```bash
# Hyperliquidæµ‹è¯•ç½‘é…ç½®
HYPERLIQUID_TESTNET_PRIVATE_KEY=0xYOUR_PRIVATE_KEY_HERE
HYPERLIQUID_TESTNET=true

# å¯é€‰ï¼šæ—¥å¿—çº§åˆ«
LOG_LEVEL=INFO
```

ğŸ’¡ **æç¤º**ï¼šä½ çš„ç§é’¥ä»ä¸ä¼šè¢«å‘é€åˆ°ä»»ä½•æœåŠ¡å™¨ï¼Œä»…ç”¨äºæœ¬åœ°ç­¾åäº¤æ˜“ã€‚

### å¿«é€Ÿè¿è¡Œ

```bash
# è‡ªåŠ¨å‘ç°å¹¶è¿è¡Œç¬¬ä¸€ä¸ªæ´»åŠ¨é…ç½®
uv run src/run_bot.py

# è¿è¡Œå‰éªŒè¯é…ç½®ï¼ˆæ¨èï¼‰
uv run src/run_bot.py --validate

# è¿è¡Œç‰¹å®šé…ç½®æ–‡ä»¶
uv run src/run_bot.py bots/btc_conservative.yaml
```

---

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### è®¾è®¡åŸåˆ™

æœ¬é¡¹ç›®éµå¾ª**SOLIDåŸåˆ™**ï¼Œé‡‡ç”¨æ¸…æ™°çš„æ¶æ„æ¨¡å¼ï¼š

- **å•ä¸€èŒè´£åŸåˆ™ï¼ˆSRPï¼‰** - æ¯ä¸ªç»„ä»¶æœ‰æ˜ç¡®çš„èŒè´£è¾¹ç•Œ
- **å¼€é—­åŸåˆ™ï¼ˆOCPï¼‰** - é€šè¿‡æ¥å£æ‰©å±•ï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç 
- **é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLSPï¼‰** - äº¤æ˜“æ‰€é€‚é…å™¨å¯äº’æ¢
- **æ¥å£éš”ç¦»åŸåˆ™ï¼ˆISPï¼‰** - æœ€å°åŒ–æ¥å£ä¾èµ–
- **ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰** - ä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°

### æ ¸å¿ƒç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   TradingEngine                      â”‚
â”‚            (æ ¸å¿ƒç¼–æ’å±‚ - src/core/engine.py)          â”‚
â”‚                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Strategy   â”‚  â”‚  Exchange    â”‚  â”‚    Risk    â”‚  â”‚
â”‚  â”‚  Interface  â”‚  â”‚  Adapter     â”‚  â”‚  Manager   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â†‘                â†‘                  â†‘         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â”‚   Grid    â”‚    â”‚Hyperliq.â”‚      â”‚Stop Loss/  â”‚
    â”‚ Strategy  â”‚    â”‚ Adapter â”‚      â”‚Take Profit â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1. **TradingEngine** (`src/core/engine.py`)
- ä¸»ç¼–æ’å™¨ï¼Œåè°ƒæ‰€æœ‰ç»„ä»¶
- ç®¡ç†å¸‚åœºæ•°æ®è®¢é˜…
- æ‰§è¡Œäº¤æ˜“ä¿¡å·
- å¤„ç†è®¢å•ç”Ÿå‘½å‘¨æœŸ

#### 2. **Strategy Interface** (`src/interfaces/strategy.py`)
- å®šä¹‰äº¤æ˜“ç­–ç•¥çš„æ ‡å‡†æ¥å£
- ç­–ç•¥é€šè¿‡å®ç°æ¥å£æ¥æä¾›äº¤æ˜“å†³ç­–
- æ”¯æŒå¤šç§ç­–ç•¥ç±»å‹ï¼ˆç½‘æ ¼ã€å‡çº¿ã€å¥—åˆ©ç­‰ï¼‰

#### 3. **Exchange Adapter** (`src/interfaces/exchange.py`)
- ç»Ÿä¸€çš„äº¤æ˜“æ‰€æŠ½è±¡å±‚
- å½“å‰å®ç°ï¼šHyperliquid
- æ˜“äºæ·»åŠ æ–°äº¤æ˜“æ‰€ï¼ˆå¸å®‰ã€OKXç­‰ï¼‰

#### 4. **Risk Manager** (`src/core/risk_manager.py`)
- è´¦æˆ·çº§åˆ«é£é™©ç›‘æ§
- æ­¢æŸ/æ­¢ç›ˆæ‰§è¡Œ
- ä»“ä½å¤§å°æ§åˆ¶
- å›æ’¤ä¿æŠ¤

#### 5. **Market Data Provider** (`src/exchanges/hyperliquid/market_data.py`)
- WebSocketå®æ—¶ä»·æ ¼æµ
- è®¢å•ç°¿æ•°æ®
- äº¤æ˜“å†å²

### æ•°æ®æµ

```
å¸‚åœºæ•°æ® (WebSocket)
    â†“
TradingEngine
    â†“
Strategy.on_market_data()
    â†“
ç”Ÿæˆ TradingSignal
    â†“
RiskManager.validate_signal()
    â†“
ExchangeAdapter.place_order()
    â†“
è®¢å•æ‰§è¡Œ & çŠ¶æ€æ›´æ–°
```

### ç›®å½•ç»“æ„

```
hyperliquid-trading-bot/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ run_bot.py                 # ä¸»å…¥å£
â”‚   â”œâ”€â”€ core/                      # æ ¸å¿ƒå¼•æ“
â”‚   â”‚   â”œâ”€â”€ engine.py              # äº¤æ˜“å¼•æ“
â”‚   â”‚   â”œâ”€â”€ enhanced_config.py     # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ key_manager.py         # ç§é’¥ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ risk_manager.py        # é£é™©ç®¡ç†
â”‚   â”‚   â””â”€â”€ endpoint_router.py     # APIè·¯ç”±
â”‚   â”œâ”€â”€ strategies/                # äº¤æ˜“ç­–ç•¥
â”‚   â”‚   â””â”€â”€ grid/
â”‚   â”‚       â””â”€â”€ basic_grid.py      # ç½‘æ ¼ç­–ç•¥å®ç°
â”‚   â”œâ”€â”€ exchanges/                 # äº¤æ˜“æ‰€é€‚é…å™¨
â”‚   â”‚   â””â”€â”€ hyperliquid/
â”‚   â”‚       â”œâ”€â”€ adapter.py         # Hyperliquidé›†æˆ
â”‚   â”‚       â””â”€â”€ market_data.py     # å¸‚åœºæ•°æ®æä¾›è€…
â”‚   â”œâ”€â”€ interfaces/                # ä¸šåŠ¡æ¥å£
â”‚   â”‚   â”œâ”€â”€ strategy.py            # ç­–ç•¥æ¥å£
â”‚   â”‚   â””â”€â”€ exchange.py            # äº¤æ˜“æ‰€æ¥å£
â”‚   â””â”€â”€ utils/                     # å·¥å…·ç±»
â”‚       â”œâ”€â”€ events.py              # äº‹ä»¶å®šä¹‰
â”‚       â””â”€â”€ exceptions.py          # å¼‚å¸¸ç±»
â”œâ”€â”€ bots/                          # æœºå™¨äººé…ç½®
â”‚   â””â”€â”€ btc_conservative.yaml      # ä¿å®ˆBTCç­–ç•¥
â”œâ”€â”€ learning_examples/             # æ•™å­¦è„šæœ¬
â”‚   â”œâ”€â”€ 01_websockets/             # WebSocketç¤ºä¾‹
â”‚   â”œâ”€â”€ 02_market_data/            # å¸‚åœºæ•°æ®
â”‚   â”œâ”€â”€ 03_account_info/           # è´¦æˆ·ä¿¡æ¯
â”‚   â”œâ”€â”€ 04_trading/                # äº¤æ˜“æ“ä½œ
â”‚   â”œâ”€â”€ 05_funding/                # èµ„é‡‘è´¹ç‡
â”‚   â””â”€â”€ 06_copy_trading/           # å¤åˆ¶äº¤æ˜“
â””â”€â”€ tests/                         # æµ‹è¯•å¥—ä»¶
```

---

## âš™ï¸ é…ç½®ç³»ç»Ÿ

### é…ç½®æ–‡ä»¶ç»“æ„

æ‰€æœ‰æœºå™¨äººé…ç½®å­˜å‚¨åœ¨`bots/`ç›®å½•çš„YAMLæ–‡ä»¶ä¸­ã€‚æ¯ä¸ªé…ç½®æ–‡ä»¶å®šä¹‰ä¸€ä¸ªå®Œæ•´çš„äº¤æ˜“ç­–ç•¥ã€‚

### å®Œæ•´é…ç½®ç¤ºä¾‹

```yaml
# bots/btc_conservative.yaml
name: "btc_conservative_clean"
active: true  # è®¾ç½®ä¸ºfalseå¯ç¦ç”¨æ­¤é…ç½®

# äº¤æ˜“æ‰€é…ç½®
exchange:
  type: "hyperliquid"  # æ”¯æŒ: hyperliquid, hl
  testnet: true        # true=æµ‹è¯•ç½‘, false=ä¸»ç½‘

# è´¦æˆ·ç®¡ç†
account:
  max_allocation_pct: 10.0  # ä½¿ç”¨è´¦æˆ·ä½™é¢çš„ç™¾åˆ†æ¯” (1-100%)

# ç½‘æ ¼ç­–ç•¥å‚æ•°
grid:
  symbol: "BTC"              # äº¤æ˜“å¯¹ (BTC, ETH, SOLç­‰)
  levels: 10                 # ä¹°å–è®¢å•æ•°é‡ (3-50)

  price_range:
    mode: "auto"             # auto=è‡ªåŠ¨è®¡ç®—, manual=æ‰‹åŠ¨è®¾ç½®
    auto:
      range_pct: 5.0         # è·ä¸­å¿ƒä»·Â±%èŒƒå›´
    # manual:                # æ‰‹åŠ¨æ¨¡å¼ç¤ºä¾‹
    #   upper_price: 45000.0
    #   lower_price: 35000.0

# é£é™©ç®¡ç†é…ç½®
risk_management:
  # æŒä»“é€€å‡ºç­–ç•¥
  stop_loss_enabled: false   # å¯ç”¨æ­¢æŸ
  stop_loss_pct: 8.0         # æ­¢æŸç™¾åˆ†æ¯” (1-20%)

  take_profit_enabled: false # å¯ç”¨æ­¢ç›ˆ
  take_profit_pct: 25.0      # æ­¢ç›ˆç™¾åˆ†æ¯” (5-100%)

  # è´¦æˆ·çº§åˆ«ä¿æŠ¤
  max_drawdown_pct: 15.0     # æœ€å¤§å›æ’¤é™åˆ¶ (5-50%)
  max_position_size_pct: 40.0 # å•ä¸ªä»“ä½æœ€å¤§å æ¯” (10-100%)

  # ç½‘æ ¼å†å¹³è¡¡
  rebalance:
    price_move_threshold_pct: 12.0  # å†å¹³è¡¡è§¦å‘é˜ˆå€¼

# ç›‘æ§é…ç½®
monitoring:
  log_level: "INFO"          # DEBUG/INFO/WARNING/ERROR
```

### é…ç½®å‚æ•°è¯¦è§£

#### è´¦æˆ·é…ç½® (`account`)

| å‚æ•° | èŒƒå›´ | è¯´æ˜ | æ¨èå€¼ |
|------|------|------|--------|
| `max_allocation_pct` | 1-100% | ç”¨äºæ­¤ç­–ç•¥çš„è´¦æˆ·èµ„é‡‘ç™¾åˆ†æ¯” | ä¿å®ˆ:5-10%, æ¿€è¿›:20-50% |

**ğŸ’¡ æç¤º**ï¼šä»å°é¢åˆ†é…å¼€å§‹ï¼ˆ5-10%ï¼‰ï¼ŒéªŒè¯ç­–ç•¥æœ‰æ•ˆåå†å¢åŠ ã€‚

#### ç½‘æ ¼é…ç½® (`grid`)

| å‚æ•° | èŒƒå›´ | è¯´æ˜ | æ¨èå€¼ |
|------|------|------|--------|
| `symbol` | å­—ç¬¦ä¸² | äº¤æ˜“å¯¹ç¬¦å· | BTC, ETH, SOL |
| `levels` | 3-50 | ç½‘æ ¼å±‚çº§æ•°é‡ | ä¿å®ˆ:5-10, æ¿€è¿›:20-30 |
| `range_pct` | 1-50% | ä»·æ ¼èŒƒå›´å®½åº¦ | éœ‡è¡:3-8%, è¶‹åŠ¿:10-20% |

**ç½‘æ ¼å±‚çº§é€‰æ‹©**ï¼š
- **5-10å±‚** - ç®€å•ç®¡ç†ï¼Œé€‚åˆåˆå­¦è€…
- **10-20å±‚** - å¹³è¡¡é¢‘ç‡å’Œåˆ©æ¶¦
- **20-30å±‚** - é«˜é¢‘äº¤æ˜“ï¼Œé€‚åˆçª„å¹…éœ‡è¡

**ä»·æ ¼èŒƒå›´é€‰æ‹©**ï¼š
- **3-5%** - çª„å¹…éœ‡è¡å¸‚åœº
- **5-10%** - æ­£å¸¸æ³¢åŠ¨å¸‚åœº
- **10-20%** - é«˜æ³¢åŠ¨/è¶‹åŠ¿å¸‚åœº

#### é£é™©ç®¡ç† (`risk_management`)

| å‚æ•° | èŒƒå›´ | è¯´æ˜ | æ¨èå€¼ |
|------|------|------|--------|
| `stop_loss_pct` | 1-20% | æŒä»“æŸå¤±è§¦å‘å¹³ä»“ | 5-10% |
| `take_profit_pct` | 5-100% | æŒä»“ç›ˆåˆ©è§¦å‘å¹³ä»“ | 15-30% |
| `max_drawdown_pct` | 5-50% | è´¦æˆ·å›æ’¤åœæ­¢äº¤æ˜“ | 10-20% |
| `max_position_size_pct` | 10-100% | å•ä¸ªä»“ä½æœ€å¤§å æ¯” | 30-50% |
| `price_move_threshold_pct` | 5-50% | å†å¹³è¡¡è§¦å‘é˜ˆå€¼ | 10-15% |

**âš ï¸ é£é™©ç®¡ç†æœ€ä½³å®è·µ**ï¼š
- å§‹ç»ˆå¯ç”¨`max_drawdown_pct`ä¿æŠ¤è´¦æˆ·
- æµ‹è¯•æ—¶ä½¿ç”¨ä¸¥æ ¼çš„`stop_loss_pct`ï¼ˆ3-5%ï¼‰
- é¿å…`max_position_size_pct`è¶…è¿‡50%

### é…ç½®æ¨¡æ¿

#### ä¿å®ˆç­–ç•¥ï¼ˆä½é£é™©ï¼‰
```yaml
account:
  max_allocation_pct: 10.0

grid:
  levels: 10
  price_range:
    mode: "auto"
    auto:
      range_pct: 5.0

risk_management:
  stop_loss_enabled: true
  stop_loss_pct: 5.0
  max_drawdown_pct: 10.0
  rebalance:
    price_move_threshold_pct: 12.0
```

#### æ¿€è¿›ç­–ç•¥ï¼ˆé«˜é£é™©ï¼‰
```yaml
account:
  max_allocation_pct: 30.0

grid:
  levels: 20
  price_range:
    mode: "auto"
    auto:
      range_pct: 15.0

risk_management:
  stop_loss_enabled: true
  stop_loss_pct: 10.0
  max_drawdown_pct: 20.0
  rebalance:
    price_move_threshold_pct: 8.0
```

---

## ğŸ“Š ç½‘æ ¼äº¤æ˜“ç­–ç•¥è¯¦è§£

### ä»€ä¹ˆæ˜¯ç½‘æ ¼äº¤æ˜“ï¼Ÿ

ç½‘æ ¼äº¤æ˜“æ˜¯ä¸€ç§é‡åŒ–äº¤æ˜“ç­–ç•¥ï¼Œåœ¨é¢„è®¾ä»·æ ¼åŒºé—´å†…æ”¾ç½®ä¸€ç³»åˆ—ä¹°å…¥å’Œå–å‡ºé™ä»·å•ï¼Œå½¢æˆ"ç½‘æ ¼"ã€‚å½“ä»·æ ¼æ³¢åŠ¨æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œä½ä¹°é«˜å–ï¼Œä»å¸‚åœºæ³¢åŠ¨ä¸­è·åˆ©ã€‚

### ç½‘æ ¼äº¤æ˜“åŸç†

```
ä»·æ ¼
  â†‘
  â”‚  å–å• â”€â”€â”€â”€â”€  $42,000 (Level 5)
  â”‚  å–å• â”€â”€â”€â”€â”€  $41,000 (Level 4)
  â”‚  å–å• â”€â”€â”€â”€â”€  $40,500 (Level 3)
  â”‚
  â”‚  ä¸­å¿ƒä»·æ ¼ â”€â”€  $40,000
  â”‚
  â”‚  ä¹°å• â”€â”€â”€â”€â”€  $39,500 (Level 2)
  â”‚  ä¹°å• â”€â”€â”€â”€â”€  $39,000 (Level 1)
  â”‚  ä¹°å• â”€â”€â”€â”€â”€  $38,000 (Level 0)
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’
```

**å·¥ä½œæµç¨‹**ï¼š
1. åœ¨å½“å‰ä»·æ ¼ä¸Šä¸‹è®¾ç½®ä¹°å–è®¢å•
2. ä»·æ ¼ä¸‹è·Œæ—¶ï¼Œä¹°å•æˆäº¤ï¼ŒæŒæœ‰èµ„äº§
3. ä»·æ ¼ä¸Šæ¶¨æ—¶ï¼Œå–å•æˆäº¤ï¼Œè·å–åˆ©æ¶¦
4. æ¯æ¬¡æˆäº¤åé‡æ–°æ”¾ç½®è®¢å•

### ç½‘æ ¼äº¤æ˜“é€‚ç”¨åœºæ™¯

âœ… **é€‚åˆçš„å¸‚åœºæ¡ä»¶**ï¼š
- æ¨ªç›˜éœ‡è¡å¸‚åœºï¼ˆä»·æ ¼åœ¨åŒºé—´å†…æ³¢åŠ¨ï¼‰
- é«˜æ³¢åŠ¨æ€§å¸‚åœºï¼ˆé¢‘ç¹çš„ä»·æ ¼æ³¢åŠ¨ï¼‰
- ç¼ºä¹æ˜ç¡®è¶‹åŠ¿çš„å¸‚åœº

âŒ **ä¸é€‚åˆçš„å¸‚åœºæ¡ä»¶**ï¼š
- å¼ºå•è¾¹è¶‹åŠ¿å¸‚åœºï¼ˆæŒç»­ä¸Šæ¶¨æˆ–ä¸‹è·Œï¼‰
- æä½æ³¢åŠ¨å¸‚åœºï¼ˆä»·æ ¼å‡ ä¹ä¸åŠ¨ï¼‰
- æµåŠ¨æ€§æå·®çš„å¸‚åœº

### å‚æ•°è°ƒä¼˜ç­–ç•¥

#### 1. ç½‘æ ¼å±‚çº§æ•°é‡ (`levels`)

**æ›´å¤šå±‚çº§**ï¼š
- âœ… äº¤æ˜“æœºä¼šæ›´å¤š
- âœ… æ›´å¹³æ»‘çš„æˆæœ¬å¹³å‡
- âŒ å•ç¬”åˆ©æ¶¦æ›´å°
- âŒ æ‰‹ç»­è´¹å æ¯”æ›´é«˜

**æ›´å°‘å±‚çº§**ï¼š
- âœ… å•ç¬”åˆ©æ¶¦æ›´å¤§
- âœ… æ‰‹ç»­è´¹å æ¯”æ›´ä½
- âŒ äº¤æ˜“æœºä¼šæ›´å°‘
- âŒ æˆæœ¬å¹³å‡æ•ˆæœå·®

**æ¨èé…ç½®**ï¼š
- **çª„å¹…éœ‡è¡ï¼ˆÂ±3-5%ï¼‰** â†’ 15-25å±‚
- **æ­£å¸¸æ³¢åŠ¨ï¼ˆÂ±5-10%ï¼‰** â†’ 10-15å±‚
- **å®½å¹…æ³¢åŠ¨ï¼ˆÂ±10-20%ï¼‰** â†’ 5-10å±‚

#### 2. ä»·æ ¼èŒƒå›´ (`range_pct`)

**çª„èŒƒå›´ï¼ˆ3-8%ï¼‰**ï¼š
- âœ… é«˜æˆäº¤é¢‘ç‡
- âœ… é€‚åˆç¨³å®šå¸å¯¹
- âŒ å®¹æ˜“çªç ´èŒƒå›´
- âŒ é¢‘ç¹å†å¹³è¡¡

**å®½èŒƒå›´ï¼ˆ10-20%ï¼‰**ï¼š
- âœ… è¦†ç›–æ›´å¤§æ³¢åŠ¨
- âœ… æ›´å°‘å†å¹³è¡¡
- âŒ æˆäº¤é¢‘ç‡ä½
- âŒ èµ„é‡‘æ•ˆç‡ä½

**æ¨èé…ç½®**ï¼š
- **BTC/ETH** â†’ 5-10%
- **ä¸»æµå¸** â†’ 8-15%
- **å°å¸‚å€¼å¸** â†’ 15-25%

#### 3. èµ„é‡‘åˆ†é… (`max_allocation_pct`)

**é£é™©ç­‰çº§**ï¼š
- **æä¿å®ˆ** â†’ 5-10%
- **ä¿å®ˆ** â†’ 10-20%
- **ä¸­ç­‰** â†’ 20-40%
- **æ¿€è¿›** â†’ 40-60%
- **ææ¿€è¿›** â†’ 60%+ï¼ˆä¸æ¨èï¼‰

### ä¸åŒå¸‚åœºæ¡ä»¶çš„ç­–ç•¥é…ç½®

#### ç‰›å¸‚é…ç½®ï¼ˆä¸Šæ¶¨è¶‹åŠ¿ï¼‰
```yaml
grid:
  levels: 8
  price_range:
    mode: "auto"
    auto:
      range_pct: 8.0  # æ›´å®½èŒƒå›´æ•æ‰ä¸Šæ¶¨

risk_management:
  stop_loss_pct: 8.0  # è¾ƒå®½æ­¢æŸ
  take_profit_pct: 20.0  # è¾ƒä½æ­¢ç›ˆï¼ˆè®©åˆ©æ¶¦å¥”è·‘ï¼‰
  rebalance:
    price_move_threshold_pct: 15.0  # è¾ƒé«˜é˜ˆå€¼é¿å…é¢‘ç¹å†å¹³è¡¡
```

#### ç†Šå¸‚é…ç½®ï¼ˆä¸‹è·Œè¶‹åŠ¿ï¼‰
```yaml
grid:
  levels: 8
  price_range:
    mode: "auto"
    auto:
      range_pct: 8.0

risk_management:
  stop_loss_pct: 5.0  # ä¸¥æ ¼æ­¢æŸ
  take_profit_pct: 10.0  # å¿«é€Ÿè·åˆ©
  rebalance:
    price_move_threshold_pct: 10.0
```

#### éœ‡è¡å¸‚é…ç½®ï¼ˆæ¨ªç›˜ï¼‰
```yaml
grid:
  levels: 15  # æ›´å¤šå±‚çº§
  price_range:
    mode: "auto"
    auto:
      range_pct: 5.0  # çª„èŒƒå›´é«˜é¢‘

risk_management:
  stop_loss_pct: 8.0
  take_profit_pct: 15.0
  rebalance:
    price_move_threshold_pct: 12.0
```

### é£é™©æ”¶ç›Šæƒè¡¡

| é…ç½® | é¢„æœŸæ”¶ç›Š | é£é™©ç­‰çº§ | é€‚åˆäººç¾¤ |
|------|----------|----------|----------|
| ä¿å®ˆï¼ˆ5-10%åˆ†é…ï¼Œçª„èŒƒå›´ï¼‰ | ä½-ä¸­ | ä½ | åˆå­¦è€… |
| å¹³è¡¡ï¼ˆ10-20%åˆ†é…ï¼Œä¸­èŒƒå›´ï¼‰ | ä¸­ | ä¸­ | æœ‰ç»éªŒè€… |
| æ¿€è¿›ï¼ˆ30%+åˆ†é…ï¼Œå®½èŒƒå›´ï¼‰ | ä¸­-é«˜ | é«˜ | ä¸“ä¸šäº¤æ˜“è€… |

---

## ğŸ›¡ï¸ é£é™©ç®¡ç†

### æ¦‚è¿°

é£é™©ç®¡ç†ç³»ç»Ÿæä¾›å¤šå±‚ä¿æŠ¤æœºåˆ¶ï¼Œé˜²æ­¢è¿‡åº¦æŸå¤±å’Œæ§åˆ¶é£é™©æš´éœ²ã€‚

### 1. æŒä»“çº§åˆ«é€€å‡º

#### æ­¢æŸ (Stop Loss)

è‡ªåŠ¨å…³é—­äºæŸè¶…è¿‡é˜ˆå€¼çš„æŒä»“ã€‚

```yaml
risk_management:
  stop_loss_enabled: true
  stop_loss_pct: 8.0  # äºæŸ8%æ—¶å¹³ä»“
```

**å·¥ä½œåŸç†**ï¼š
```
å…¥åœºä»·æ ¼: $40,000
æ­¢æŸæ¯”ä¾‹: 8%
è§¦å‘ä»·æ ¼: $36,800 (ä¸‹è·Œ8%)
â†’ è‡ªåŠ¨å¸‚ä»·å–å‡ºå…¨éƒ¨æŒä»“
```

**æœ€ä½³å®è·µ**ï¼š
- æµ‹è¯•æ—¶ä½¿ç”¨3-5%ï¼ˆä¸¥æ ¼ï¼‰
- ç”Ÿäº§ç¯å¢ƒä½¿ç”¨5-10%ï¼ˆåˆç†ï¼‰
- é¿å…è¶…è¿‡15%ï¼ˆè¿‡å®½ï¼‰

#### æ­¢ç›ˆ (Take Profit)

è‡ªåŠ¨å…³é—­ç›ˆåˆ©è¾¾åˆ°ç›®æ ‡çš„æŒä»“ã€‚

```yaml
risk_management:
  take_profit_enabled: true
  take_profit_pct: 25.0  # ç›ˆåˆ©25%æ—¶å¹³ä»“
```

**å·¥ä½œåŸç†**ï¼š
```
å…¥åœºä»·æ ¼: $40,000
æ­¢ç›ˆæ¯”ä¾‹: 25%
è§¦å‘ä»·æ ¼: $50,000 (ä¸Šæ¶¨25%)
â†’ è‡ªåŠ¨å¸‚ä»·å–å‡ºå…¨éƒ¨æŒä»“
```

**æœ€ä½³å®è·µ**ï¼š
- çŸ­æœŸäº¤æ˜“ï¼š10-20%
- ä¸­æœŸæŒæœ‰ï¼š20-40%
- é•¿æœŸæŠ•èµ„ï¼š50%+

### 2. è´¦æˆ·çº§åˆ«ä¿æŠ¤

#### æœ€å¤§å›æ’¤é™åˆ¶ (Max Drawdown)

å½“è´¦æˆ·æ•´ä½“æŸå¤±è¶…è¿‡é˜ˆå€¼æ—¶åœæ­¢æ‰€æœ‰äº¤æ˜“ã€‚

```yaml
risk_management:
  max_drawdown_pct: 15.0  # è´¦æˆ·å›æ’¤15%æ—¶åœæ­¢
```

**è®¡ç®—æ–¹å¼**ï¼š
```
åˆå§‹è´¦æˆ·: $10,000
å½“å‰ä½™é¢: $8,600
å›æ’¤: ($10,000 - $8,600) / $10,000 = 14%
â†’ æ¥è¿‘15%é™åˆ¶ï¼Œå³å°†è§¦å‘ä¿æŠ¤
```

**æ¨èè®¾ç½®**ï¼š
- æä¿å®ˆï¼š5-10%
- ä¿å®ˆï¼š10-15%
- ä¸­ç­‰ï¼š15-25%
- æ¿€è¿›ï¼š25-35%

#### ä»“ä½å¤§å°é™åˆ¶ (Position Size)

é™åˆ¶å•ä¸ªä»“ä½å è´¦æˆ·èµ„é‡‘çš„æœ€å¤§æ¯”ä¾‹ã€‚

```yaml
risk_management:
  max_position_size_pct: 40.0  # å•ä»“ä½æœ€å¤š40%
```

**é£é™©ç­‰çº§**ï¼š
- **10-20%** - æä¿å®ˆ
- **20-40%** - ä¿å®ˆ
- **40-60%** - æ¿€è¿›
- **60%+** - å±é™©ï¼ˆä¸æ¨èï¼‰

### 3. ç½‘æ ¼å†å¹³è¡¡

å½“ä»·æ ¼ç§»å‡ºç½‘æ ¼èŒƒå›´æ—¶ï¼Œè‡ªåŠ¨è°ƒæ•´ç½‘æ ¼ä½ç½®ã€‚

```yaml
risk_management:
  rebalance:
    price_move_threshold_pct: 12.0
```

**å†å¹³è¡¡è§¦å‘æ¡ä»¶**ï¼š
```
ç½‘æ ¼èŒƒå›´: $38,000 - $42,000 (Â±5%)
ä¸­å¿ƒä»·æ ¼: $40,000
é˜ˆå€¼: 12%

å½“å‰ä»·æ ¼: $44,800
ä»·æ ¼å˜åŒ–: ($44,800 - $40,000) / $40,000 = 12%
â†’ è§¦å‘å†å¹³è¡¡ï¼Œé‡æ–°è®¡ç®—ç½‘æ ¼
```

**å†å¹³è¡¡æµç¨‹**ï¼š
1. å–æ¶ˆæ‰€æœ‰æœªæˆäº¤è®¢å•
2. åŸºäºå½“å‰ä»·æ ¼è®¡ç®—æ–°ç½‘æ ¼
3. æ”¾ç½®æ–°çš„ä¹°å–è®¢å•
4. ä¿ç•™ç°æœ‰æŒä»“ï¼ˆä¸å¼ºåˆ¶å¹³ä»“ï¼‰

**é˜ˆå€¼è®¾ç½®**ï¼š
- **5-8%** - é«˜é¢‘å†å¹³è¡¡ï¼ˆé«˜æ‰‹ç»­è´¹ï¼‰
- **8-12%** - å¹³è¡¡ï¼ˆæ¨èï¼‰
- **12-20%** - ä½é¢‘å†å¹³è¡¡ï¼ˆå¯èƒ½é”™è¿‡æœºä¼šï¼‰

### 4. èµ„é‡‘è´¹ç‡ç›‘æ§

âš ï¸ **é‡è¦**ï¼šèµ„é‡‘è´¹ç‡æ˜¯æ°¸ç»­åˆçº¦ç‰¹æœ‰çš„æˆæœ¬ï¼Œä¼šæ˜¾è‘—å½±å“ç›ˆåˆ©èƒ½åŠ›ã€‚

#### ä»€ä¹ˆæ˜¯èµ„é‡‘è´¹ç‡ï¼Ÿ

èµ„é‡‘è´¹ç‡æ˜¯æ°¸ç»­åˆçº¦çš„å®šæœŸæ”¯ä»˜æœºåˆ¶ï¼Œç¡®ä¿åˆçº¦ä»·æ ¼é”šå®šç°è´§ä»·æ ¼ï¼š

```
èµ„é‡‘æ”¯ä»˜ = ä»“ä½å¤§å° Ã— é¢„è¨€æœºä»·æ ¼ Ã— èµ„é‡‘è´¹ç‡
```

**æ”¯ä»˜é¢‘ç‡**ï¼šHyperliquidä¸Šæ¯å°æ—¶æ”¯ä»˜ä¸€æ¬¡

**æ­£è´Ÿå«ä¹‰**ï¼š
- **æ­£è´¹ç‡** â†’ å¤šå¤´æ”¯ä»˜ç»™ç©ºå¤´ï¼ˆå¤šå¤´è¿‡çƒ­ï¼‰
- **è´Ÿè´¹ç‡** â†’ ç©ºå¤´æ”¯ä»˜ç»™å¤šå¤´ï¼ˆç©ºå¤´è¿‡çƒ­ï¼‰

#### å…¥åœºå‰æ£€æŸ¥æ¸…å•

åœ¨å¼€ä»“å‰è¯„ä¼°èµ„é‡‘è´¹ç‡å½±å“ï¼š

##### âœ… 1. è´¹ç‡æ–¹å‘æ£€æŸ¥
```yaml
# å†³ç­–è§„åˆ™
if æ”¯ä»˜èµ„é‡‘è´¹ç‡ AND æŒä»“æ—¶é—´ > 1å°æ—¶:
    â†’ å‡å°ä»“ä½æˆ–æé«˜ä¿¡å·è¦æ±‚
```

**å®ä¾‹**ï¼š
```
è®¡åˆ’å¼€å¤šä»“ BTC
å½“å‰èµ„é‡‘è´¹ç‡: +0.01% (å¤šå¤´æ”¯ä»˜)
æŒä»“è®¡åˆ’: 12å°æ—¶
â†’ ä½ å°†æ”¯ä»˜12æ¬¡èµ„é‡‘è´¹ç‡
â†’ è€ƒè™‘å‡å°‘30-50%ä»“ä½
```

##### âœ… 2. å½’ä¸€åŒ–åˆ°è´¦æˆ·è§„æ¨¡
```python
# è®¡ç®—æ¯æ—¥è´¹ç‡æˆæœ¬
æ—¥è´¹ç‡æˆæœ¬ = åä¹‰ä»·å€¼ Ã— å°æ—¶è´¹ç‡ Ã— 24
è´¹ç‡æ¶ˆè€—ç‡ = æ—¥è´¹ç‡æˆæœ¬ / è´¦æˆ·æƒç›Š

# é£é™©é˜ˆå€¼
if è´¹ç‡æ¶ˆè€—ç‡ < 0.5%: å®‰å…¨
elif è´¹ç‡æ¶ˆè€—ç‡ < 1.0%: è°¨æ…
elif è´¹ç‡æ¶ˆè€—ç‡ < 2.0%: é«˜é£é™©
else: ç¦æ­¢å…¥åœº
```

**å®ä¾‹**ï¼š
```
è´¦æˆ·æƒç›Š: $10,000
ä»“ä½å¤§å°: $5,000 (5å€æ æ† Ã— $1,000)
å°æ—¶è´¹ç‡: +0.01%
æ—¥è´¹ç‡æˆæœ¬: $5,000 Ã— 0.01% Ã— 24 = $12
è´¹ç‡æ¶ˆè€—ç‡: $12 / $10,000 = 0.12% âœ… å®‰å…¨
```

##### âœ… 3. è´¹ç‡ vs é¢„æœŸåˆ©æ¶¦
```python
if é¢„æœŸæ”¶ç›Š < 2 Ã— æ—¥è´¹ç‡æˆæœ¬:
    â†’ äº¤æ˜“ä¸å€¼å¾—ï¼ˆæ‰‹ç»­è´¹+èµ„é‡‘è´¹ç‡ä¼šåƒæ‰åˆ©æ¶¦ï¼‰
```

##### âœ… 4. è´¹ç‡è¶‹åŠ¿åˆ†æ
```python
# æ£€æŸ¥è´¹ç‡åŠ é€Ÿ
å½“å‰è´¹ç‡: 0.01%
3å°æ—¶å‰: 0.005%
24å°æ—¶å‰: 0.002%
â†’ è´¹ç‡åŠ é€Ÿä¸Šå‡ï¼Œå¤šå¤´è¿‡çƒ­
â†’ é¿å…åšå¤šæˆ–å‡å°ä»“ä½
```

##### âœ… 5. æ³¢åŠ¨ç‡è°ƒæ•´æ æ†ä¸Šé™
```python
# é«˜è´¹ç‡ + é«˜æ³¢åŠ¨ = é™ä½æ æ†
æœ€å¤§æ æ† = min(åŸºç¡€æ æ†, 1 / æ—¥è´¹ç‡%)

# ç¤ºä¾‹
æ—¥è´¹ç‡: 1% â†’ æœ€å¤§æ æ† = 1x
æ—¥è´¹ç‡: 0.5% â†’ æœ€å¤§æ æ† = 2x
æ—¥è´¹ç‡: 0.1% â†’ æœ€å¤§æ æ† = 10x
```

##### âœ… 6. æ—¶é—´å¯¹é½
```python
# æŒä»“æ—¶é—´å†³å®šè´¹ç‡é‡è¦æ€§
if æŒä»“æ—¶é—´ < 1å°æ—¶: è´¹ç‡æ— å…³ç´§è¦
elif æŒä»“æ—¶é—´ < 12å°æ—¶: è´¹ç‡éœ€è€ƒè™‘
else: è´¹ç‡è‡³å…³é‡è¦
```

#### æŒä»“æœŸé—´ç›‘æ§

##### âœ… 7. å®æ—¶è´¹ç‡æ¶ˆè€—è¿½è¸ª
```python
# ç»´æŠ¤æŒ‡æ ‡
å·²æ”¯ä»˜è´¹ç‡ = ç´¯è®¡è´¹ç‡æ”¯ä»˜é‡‘é¢
è´¹ç‡æ¶ˆè€—ç™¾åˆ†æ¯” = å·²æ”¯ä»˜è´¹ç‡ / è´¦æˆ·æƒç›Š

# ç¡¬æ­¢æŸ
if è´¹ç‡æ¶ˆè€— > è®¡åˆ’æœ€å¤§æŸå¤± Ã— 30%:
    â†’ ç«‹å³å¹³ä»“ï¼ˆä¸è¦è®©è´¹ç‡æ…¢æ…¢åƒæ‰è´¦æˆ·ï¼‰
```

##### âœ… 8. ç›‘æ§æ¸…ç®—è·ç¦»ç¼©å°
```python
# è´¹ç‡ä¼šå‡å°‘æƒç›Šï¼Œä½¿æ¸…ç®—ä»·æ ¼å‘ä½ é è¿‘
ATR = å¹³å‡çœŸå®æ³¢å¹…
æ¸…ç®—è·ç¦» = |å…¥åœºä»· - æ¸…ç®—ä»·|
å®‰å…¨å€æ•° Y = 3-5

if æ¸…ç®—è·ç¦» < Y Ã— ATR:
    â†’ å‡å°‘ä»“ä½æˆ–å¹³ä»“
```

**å®ä¾‹**ï¼š
```
åšå¤š BTC
å…¥åœºä»·: $40,000
æ¸…ç®—ä»·: $38,000
æ¸…ç®—è·ç¦»: $2,000

ATR (24h): $800
å®‰å…¨é˜ˆå€¼: 3 Ã— $800 = $2,400

$2,000 < $2,400 â†’ âš ï¸ å±é™©ï¼
â†’ å‡å°‘ä»“ä½æˆ–å¹³ä»“
```

##### âœ… 9. è´¹ç‡åè½¬è­¦æŠ¥
```python
# è´¹ç‡æ”¹å˜ç¬¦å·æ—¶å‘å‡ºè­¦å‘Š
if è´¹ç‡[t] Ã— è´¹ç‡[t-1] < 0:
    â†’ æ‹¥æŒ¤æ–¹å·²æ”¹å˜
    â†’ æ”¶ç´§æ­¢æŸæˆ–éƒ¨åˆ†å¹³ä»“
```

#### è´¹ç‡ç®¡ç†å·¥å…·

1. **å‡å°‘åä¹‰ä»·å€¼**ï¼ˆæœ€ä½³ï¼‰- é™ä½ä»“ä½å¤§å°
2. **é™ä½æ æ†** - ä¸æ”¹å˜è´¹ç‡ä½†å¢åŠ ååº”æ—¶é—´
3. **ç¼©çŸ­æŒæœ‰æœŸ** - å‡å°‘è´¹ç‡æ”¯ä»˜æ¬¡æ•°
4. **åå‘åå·®** - è´¹ç‡ä¸åˆ©æ—¶è€ƒè™‘åå‘
5. **ä¸´æ—¶å¯¹å†²** - ä½¿ç”¨ç°è´§å¯¹å†²æ°¸ç»­åˆçº¦

#### æœ€å°å¯è¡Œè§„åˆ™é›†

```yaml
# å…¥åœºè§„åˆ™
entry_rules:
  - funding_burn_pct < 1.0  # æ—¥è´¹ç‡æ¶ˆè€— < 1%
  - funding_not_accelerating: true  # è´¹ç‡æœªåŠ é€Ÿ
  - expected_move > 2x_funding_cost  # é¢„æœŸæ”¶ç›Š > 2å€è´¹ç‡æˆæœ¬

# æŒä»“è§„åˆ™
position_rules:
  - exit_if_funding_loss > 30%_of_max_risk  # è´¹ç‡æŸå¤±è¶…30%æœ€å¤§é£é™©
  - exit_if_liquidation_distance < 3x_ATR  # æ¸…ç®—è·ç¦» < 3å€ATR
  - reduce_if_funding_spikes: true  # è´¹ç‡è¿ç»­é£™å‡æ—¶å‡ä»“
```

#### å¦‚ä½•åœ¨æœºå™¨äººä¸­å®ç°

**æŸ¥è¯¢èµ„é‡‘è´¹ç‡**ï¼š
```bash
uv run learning_examples/05_funding/get_funding_rates.py
```

**æ£€æŸ¥ç°è´§/æ°¸ç»­é…å¯¹**ï¼ˆå¥—åˆ©æœºä¼šï¼‰ï¼š
```bash
uv run learning_examples/05_funding/check_spot_perp_pairs_availability.py
```

**å®ç°è´¹ç‡ç›‘æ§**ï¼š
```python
from exchanges.hyperliquid.adapter import HyperliquidAdapter

adapter = HyperliquidAdapter()
meta = adapter.get_market_metadata()

for market in meta:
    if 'funding' in market:
        funding_rate = market['funding']
        print(f"{market['name']}: {funding_rate}%/hour")
```

ğŸ“– **è¯¦ç»†æŒ‡å—**ï¼šæŸ¥çœ‹ `learning_examples/05_funding/README.md` è·å–å®Œæ•´çš„èµ„é‡‘è´¹ç‡æ“ä½œæŒ‡å—ã€‚

### 5. ä¼˜é›…å…³é—­

å½“æœºå™¨äººåœæ­¢æ—¶çš„è¡Œä¸ºï¼š

```python
# é»˜è®¤è¡Œä¸º
1. å–æ¶ˆæ‰€æœ‰å¾…å¤„ç†è®¢å•
2. ä¿ç•™ç°æœ‰æŒä»“ï¼ˆä¸å¼ºåˆ¶å¹³ä»“ï¼‰
3. è®°å½•æœ€ç»ˆçŠ¶æ€
4. æ¸…ç†èµ„æº
```

**âš ï¸ æ³¨æ„**ï¼šæœºå™¨äººåœæ­¢åï¼Œä½ çš„æŒä»“ä»ç„¶å­˜åœ¨ï¼Œè¯·æ‰‹åŠ¨ç®¡ç†æˆ–é‡æ–°å¯åŠ¨æœºå™¨äººã€‚

---

## ğŸ“š å­¦ä¹ ç¤ºä¾‹

`learning_examples/`ç›®å½•åŒ…å«ç‹¬ç«‹çš„æ•™å­¦è„šæœ¬ï¼Œå¸®åŠ©ä½ æŒæ¡Hyperliquid APIçš„å„ä¸ªæ–¹é¢ã€‚

### ğŸ“¡ 01. WebSocket å®æ—¶æ•°æ®

#### åŸºç¡€WebSocketè¿æ¥
```bash
uv run learning_examples/01_websockets/realtime_prices.py
```
å­¦ä¹ å†…å®¹ï¼š
- è®¢é˜…å•ä¸ªäº¤æ˜“å¯¹çš„å®æ—¶ä»·æ ¼
- å¤„ç†WebSocketæ¶ˆæ¯
- ç®¡ç†è¿æ¥ç”Ÿå‘½å‘¨æœŸ

#### å¤šè®¢é˜…ç®¡ç†
```bash
uv run learning_examples/01_websockets/realtime_prices_multiple_subs.py
```
å­¦ä¹ å†…å®¹ï¼š
- åŒæ—¶ç›‘æ§å¤šä¸ªäº¤æ˜“å¯¹
- è®¢é˜…ç®¡ç†æœ€ä½³å®è·µ
- æ¶ˆæ¯è·¯ç”±å’Œå¤„ç†

#### æ°¸ç»­åˆçº¦ç›‘æ§
```bash
# ä½¿ç”¨åŸå§‹WebSocket
uv run learning_examples/01_websockets/realtime_all_perpetuals.py

# ä½¿ç”¨SDKå°è£…
uv run learning_examples/01_websockets/realtime_all_perpetuals_sdk.py
```
å­¦ä¹ å†…å®¹ï¼š
- è®¢é˜…æ‰€æœ‰æ°¸ç»­åˆçº¦
- æ‰¹é‡æ•°æ®å¤„ç†
- æ€§èƒ½ä¼˜åŒ–æŠ€å·§

### ğŸ“Š 02. å¸‚åœºæ•°æ®

#### è·å–æ‰€æœ‰ä»·æ ¼
```bash
uv run learning_examples/02_market_data/get_all_prices.py
```
å­¦ä¹ å†…å®¹ï¼š
- æŸ¥è¯¢æ‰€æœ‰äº¤æ˜“å¯¹ä»·æ ¼
- ä»·æ ¼æ•°æ®ç»“æ„è§£æ
- ç°è´§ vs æ°¸ç»­åˆçº¦ä»·æ ¼

#### å¸‚åœºå…ƒæ•°æ®
```bash
uv run learning_examples/02_market_data/get_market_metadata.py
```
å­¦ä¹ å†…å®¹ï¼š
- è·å–äº¤æ˜“è§„åˆ™ï¼ˆæœ€å°è®¢å•é‡ã€ä»·æ ¼ç²¾åº¦ç­‰ï¼‰
- å¸‚åœºçŠ¶æ€æŸ¥è¯¢
- äº¤æ˜“é™åˆ¶ç†è§£

### ğŸ‘¤ 03. è´¦æˆ·ä¿¡æ¯

#### ç”¨æˆ·çŠ¶æ€æŸ¥è¯¢
```bash
uv run learning_examples/03_account_info/get_user_state.py
```
å­¦ä¹ å†…å®¹ï¼š
- æŸ¥è¯¢è´¦æˆ·ä½™é¢
- æŸ¥çœ‹æŒä»“ä¿¡æ¯
- è´¦æˆ·æƒç›Šè®¡ç®—

#### æŸ¥çœ‹æœªæˆäº¤è®¢å•
```bash
uv run learning_examples/03_account_info/get_open_orders.py
```
å­¦ä¹ å†…å®¹ï¼š
- åˆ—å‡ºæ‰€æœ‰å¾…å¤„ç†è®¢å•
- è®¢å•çŠ¶æ€ç†è§£
- è®¢å•è¿‡æ»¤å’Œæ’åº

### ğŸ’¹ 04. äº¤æ˜“æ“ä½œ

#### ä¸‹é™ä»·å•
```bash
uv run learning_examples/04_trading/place_limit_order.py
```
å­¦ä¹ å†…å®¹ï¼š
- æ„é€ é™ä»·å•
- è®¢å•å‚æ•°è®¾ç½®
- è®¢å•ç¡®è®¤å¤„ç†

#### å–æ¶ˆè®¢å•
```bash
uv run learning_examples/04_trading/cancel_orders.py
```
å­¦ä¹ å†…å®¹ï¼š
- å•ä¸ªè®¢å•å–æ¶ˆ
- æ‰¹é‡å–æ¶ˆ
- å–æ¶ˆå…¨éƒ¨è®¢å•

### ğŸ’° 05. èµ„é‡‘è´¹ç‡ç›‘æ§

#### æŸ¥è¯¢èµ„é‡‘è´¹ç‡
```bash
uv run learning_examples/05_funding/get_funding_rates.py
```
å­¦ä¹ å†…å®¹ï¼š
- è·å–å½“å‰èµ„é‡‘è´¹ç‡
- å†å²è´¹ç‡æŸ¥è¯¢
- è´¹ç‡è¶‹åŠ¿åˆ†æ

#### ç°è´§/æ°¸ç»­é…å¯¹æ£€æŸ¥
```bash
uv run learning_examples/05_funding/check_spot_perp_pairs_availability.py
```
å­¦ä¹ å†…å®¹ï¼š
- æŸ¥æ‰¾åŒæ—¶æ”¯æŒç°è´§å’Œæ°¸ç»­çš„èµ„äº§
- è¯†åˆ«å¥—åˆ©æœºä¼š
- ç°è´§-æ°¸ç»­ä»·å·®åˆ†æ

#### èµ„é‡‘è´¹ç‡è¯¦ç»†æŒ‡å—
ğŸ“– **å®Œæ•´æ•™ç¨‹**ï¼š`learning_examples/05_funding/README.md`

æ¶µç›–å†…å®¹ï¼š
- èµ„é‡‘è´¹ç‡å·¥ä½œåŸç†
- å…¥åœºå‰é£é™©è¯„ä¼°
- æŒä»“æœŸé—´ç›‘æ§ç­–ç•¥
- å®æˆ˜å†³ç­–è§„åˆ™

### ğŸ”„ 06. å¤åˆ¶äº¤æ˜“

#### é•œåƒç°è´§è®¢å•
```bash
uv run learning_examples/06_copy_trading/mirror_spot_orders.py
```
å­¦ä¹ å†…å®¹ï¼š
- ç›‘å¬ç›®æ ‡è´¦æˆ·è®¢å•
- è‡ªåŠ¨å¤åˆ¶è®¢å•
- ä»“ä½æ¯”ä¾‹æ§åˆ¶

#### TWAPè®¢å•å¤åˆ¶
```bash
uv run learning_examples/06_copy_trading/mirror_spot_twap_orders.py
```
å­¦ä¹ å†…å®¹ï¼š
- æ—¶é—´åŠ æƒå¹³å‡ä»·æ ¼ï¼ˆTWAPï¼‰ç­–ç•¥
- å¤§é¢è®¢å•åˆ†æ‰¹æ‰§è¡Œ
- å‡å°‘ä»·æ ¼å†²å‡»

#### åŸå§‹WebSocketæ¶ˆæ¯
```bash
uv run learning_examples/06_copy_trading/print_raw_websocket_messages.py
```
å­¦ä¹ å†…å®¹ï¼š
- WebSocketæ¶ˆæ¯ç»“æ„
- è°ƒè¯•æŠ€å·§
- è‡ªå®šä¹‰äº‹ä»¶å¤„ç†

#### è§£æç”¨æˆ·äº‹ä»¶
```bash
uv run learning_examples/06_copy_trading/print_parsed_user_events.py
```
å­¦ä¹ å†…å®¹ï¼š
- ç”¨æˆ·äº‹ä»¶ç±»å‹
- äº‹ä»¶è§£æé€»è¾‘
- æ„å»ºè‡ªå®šä¹‰ç›‘æ§

### ğŸ“– å­¦ä¹ è·¯å¾„å»ºè®®

#### åˆå­¦è€…è·¯å¾„
1. **å¸‚åœºæ•°æ®** â†’ ç†è§£æ•°æ®ç»“æ„
2. **WebSocket** â†’ å®æ—¶æ•°æ®è®¢é˜…
3. **è´¦æˆ·ä¿¡æ¯** â†’ æŸ¥è¯¢è´¦æˆ·çŠ¶æ€
4. **äº¤æ˜“æ“ä½œ** â†’ ä¸‹å•å’Œå–æ¶ˆ

#### ä¸­çº§è·¯å¾„
5. **èµ„é‡‘è´¹ç‡** â†’ ç†è§£æ°¸ç»­åˆçº¦æˆæœ¬
6. **å¤åˆ¶äº¤æ˜“åŸºç¡€** â†’ è®¢å•é•œåƒ

#### é«˜çº§è·¯å¾„
7. **TWAPç­–ç•¥** â†’ é«˜çº§è®¢å•æ‰§è¡Œ
8. **WebSocketè°ƒè¯•** â†’ è‡ªå®šä¹‰äº‹ä»¶å¤„ç†

---

## ğŸ”Œ APIå‚è€ƒ

### æ ¸å¿ƒæ¥å£

#### TradingStrategy (`src/interfaces/strategy.py`)

å®šä¹‰æ‰€æœ‰äº¤æ˜“ç­–ç•¥å¿…é¡»å®ç°çš„æ¥å£ã€‚

```python
from interfaces.strategy import TradingStrategy, TradingSignal, MarketData

class MyStrategy(TradingStrategy):
    async def on_start(self) -> None:
        """ç­–ç•¥å¯åŠ¨æ—¶è°ƒç”¨"""
        pass

    async def on_market_data(self, data: MarketData) -> List[TradingSignal]:
        """å¤„ç†å¸‚åœºæ•°æ®ï¼Œè¿”å›äº¤æ˜“ä¿¡å·"""
        signals = []
        # ä½ çš„ç­–ç•¥é€»è¾‘
        return signals

    async def on_order_update(self, order: Order) -> None:
        """è®¢å•çŠ¶æ€æ›´æ–°æ—¶è°ƒç”¨"""
        pass

    async def on_stop(self) -> None:
        """ç­–ç•¥åœæ­¢æ—¶è°ƒç”¨"""
        pass
```

**MarketDataç»“æ„**ï¼š
```python
@dataclass
class MarketData:
    symbol: str           # äº¤æ˜“å¯¹
    timestamp: float      # Unixæ—¶é—´æˆ³
    price: float          # å½“å‰ä»·æ ¼
    volume_24h: float     # 24å°æ—¶äº¤æ˜“é‡
    bid: Optional[float]  # æœ€ä½³ä¹°ä»·
    ask: Optional[float]  # æœ€ä½³å–ä»·
```

**TradingSignalç»“æ„**ï¼š
```python
@dataclass
class TradingSignal:
    signal_type: SignalType  # BUY, SELL, CLOSE
    symbol: str              # äº¤æ˜“å¯¹
    size: float              # è®¢å•å¤§å°
    price: Optional[float]   # é™ä»·ï¼ˆNone=å¸‚ä»·ï¼‰
    reason: str              # ä¿¡å·åŸå› ï¼ˆç”¨äºæ—¥å¿—ï¼‰
```

#### ExchangeAdapter (`src/interfaces/exchange.py`)

äº¤æ˜“æ‰€é€‚é…å™¨æ¥å£ï¼Œæ‰€æœ‰äº¤æ˜“æ‰€å®ç°å¿…é¡»éµå¾ªã€‚

```python
from interfaces.exchange import ExchangeAdapter, Order, OrderSide, OrderType

class MyExchangeAdapter(ExchangeAdapter):
    async def connect(self) -> None:
        """å»ºç«‹äº¤æ˜“æ‰€è¿æ¥"""
        pass

    async def place_order(
        self,
        symbol: str,
        side: OrderSide,      # BUY / SELL
        order_type: OrderType,  # LIMIT / MARKET
        size: float,
        price: Optional[float] = None
    ) -> Order:
        """ä¸‹å•"""
        pass

    async def cancel_order(self, order_id: str) -> bool:
        """å–æ¶ˆè®¢å•"""
        pass

    async def get_open_orders(self, symbol: Optional[str] = None) -> List[Order]:
        """è·å–æœªæˆäº¤è®¢å•"""
        pass

    async def get_account_balance(self) -> Dict[str, float]:
        """è·å–è´¦æˆ·ä½™é¢"""
        pass

    async def get_position(self, symbol: str) -> Optional[Position]:
        """è·å–æŒä»“"""
        pass
```

**Orderç»“æ„**ï¼š
```python
@dataclass
class Order:
    order_id: str
    symbol: str
    side: OrderSide
    order_type: OrderType
    size: float
    price: Optional[float]
    status: OrderStatus  # PENDING, FILLED, CANCELLED, REJECTED
    filled_size: float
    timestamp: float
```

### Hyperliquidé€‚é…å™¨

#### HyperliquidAdapter (`src/exchanges/hyperliquid/adapter.py`)

Hyperliquidäº¤æ˜“æ‰€çš„å…·ä½“å®ç°ã€‚

```python
from exchanges.hyperliquid import HyperliquidAdapter

# åˆå§‹åŒ–
adapter = HyperliquidAdapter(
    testnet=True,  # True=æµ‹è¯•ç½‘, False=ä¸»ç½‘
    private_key="0x..."
)

# è¿æ¥
await adapter.connect()

# ä¸‹é™ä»·å•
order = await adapter.place_order(
    symbol="BTC",
    side=OrderSide.BUY,
    order_type=OrderType.LIMIT,
    size=0.01,  # 0.01 BTC
    price=40000.0
)

# ä¸‹å¸‚ä»·å•
order = await adapter.place_order(
    symbol="BTC",
    side=OrderSide.SELL,
    order_type=OrderType.MARKET,
    size=0.01
)

# å–æ¶ˆè®¢å•
success = await adapter.cancel_order(order.order_id)

# æŸ¥è¯¢ä½™é¢
balance = await adapter.get_account_balance()
print(f"USDCä½™é¢: {balance['USDC']}")

# æŸ¥è¯¢æŒä»“
position = await adapter.get_position("BTC")
if position:
    print(f"æŒä»“å¤§å°: {position.size}")
```

#### HyperliquidMarketData (`src/exchanges/hyperliquid/market_data.py`)

å®æ—¶å¸‚åœºæ•°æ®æä¾›è€…ã€‚

```python
from exchanges.hyperliquid import HyperliquidMarketData

# åˆå§‹åŒ–
market_data = HyperliquidMarketData(testnet=True)

# å¯åŠ¨WebSocketè¿æ¥
await market_data.start()

# è®¢é˜…ä»·æ ¼æ›´æ–°
async def on_price_update(data: MarketData):
    print(f"{data.symbol}: ${data.price}")

market_data.subscribe("BTC", on_price_update)

# å–æ¶ˆè®¢é˜…
market_data.unsubscribe("BTC")

# åœæ­¢
await market_data.stop()
```

### é£é™©ç®¡ç†å™¨

#### RiskManager (`src/core/risk_manager.py`)

é£é™©ç®¡ç†å’Œè´¦æˆ·ä¿æŠ¤ã€‚

```python
from core.risk_manager import RiskManager, RiskEvent, RiskAction

# åˆå§‹åŒ–
risk_manager = RiskManager(config)

# æ›´æ–°è´¦æˆ·æŒ‡æ ‡
risk_manager.update_account_metrics(
    equity=10000.0,
    position_value=3000.0,
    unrealized_pnl=-200.0
)

# æ£€æŸ¥äº¤æ˜“ä¿¡å·
risk_events = risk_manager.check_signal(signal)

for event in risk_events:
    if event.action == RiskAction.REJECT_SIGNAL:
        print(f"ä¿¡å·è¢«æ‹’ç»: {event.reason}")
    elif event.action == RiskAction.CLOSE_POSITION:
        print(f"è§¦å‘å¹³ä»“: {event.reason}")
    elif event.action == RiskAction.STOP_TRADING:
        print(f"åœæ­¢äº¤æ˜“: {event.reason}")

# æ£€æŸ¥æŒä»“
risk_events = risk_manager.check_position(position, current_price)
```

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ä»£ç é£æ ¼

æœ¬é¡¹ç›®éµå¾ªPythonæœ€ä½³å®è·µï¼š

- **æ ¼å¼åŒ–**: ä½¿ç”¨`black`æ ¼å¼åŒ–ä»£ç 
- **å¯¼å…¥æ’åº**: ä½¿ç”¨`isort`ç®¡ç†å¯¼å…¥
- **ç±»å‹æ£€æŸ¥**: ä½¿ç”¨`mypy`è¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥
- **æ–‡æ¡£å­—ç¬¦ä¸²**: æ‰€æœ‰å…¬å…±æ¥å£å¿…é¡»æœ‰æ–‡æ¡£å­—ç¬¦ä¸²

```bash
# æ ¼å¼åŒ–ä»£ç 
black src/

# æ’åºå¯¼å…¥
isort src/

# ç±»å‹æ£€æŸ¥
mypy src/
```

### æ·»åŠ æ–°äº¤æ˜“ç­–ç•¥

#### 1. åˆ›å»ºç­–ç•¥æ–‡ä»¶

åœ¨`src/strategies/`ä¸‹åˆ›å»ºæ–°ç­–ç•¥ï¼š

```python
# src/strategies/my_strategy/my_strategy.py
from typing import List
from interfaces.strategy import TradingStrategy, TradingSignal, MarketData, SignalType

class MyStrategy(TradingStrategy):
    """
    æˆ‘çš„è‡ªå®šä¹‰ç­–ç•¥

    ç­–ç•¥æè¿°ï¼š...
    """

    def __init__(self, config: dict):
        self.config = config
        # åˆå§‹åŒ–ç­–ç•¥çŠ¶æ€

    async def on_start(self) -> None:
        """ç­–ç•¥å¯åŠ¨"""
        print("ç­–ç•¥å¯åŠ¨")

    async def on_market_data(self, data: MarketData) -> List[TradingSignal]:
        """
        å¤„ç†å¸‚åœºæ•°æ®

        Args:
            data: å¸‚åœºæ•°æ®

        Returns:
            äº¤æ˜“ä¿¡å·åˆ—è¡¨
        """
        signals = []

        # ä½ çš„ç­–ç•¥é€»è¾‘
        if self.should_buy(data):
            signals.append(TradingSignal(
                signal_type=SignalType.BUY,
                symbol=data.symbol,
                size=self.calculate_size(),
                price=data.price * 0.99,  # é™ä»·ä½1%
                reason="ä¹°å…¥ä¿¡å·è§¦å‘"
            ))

        return signals

    def should_buy(self, data: MarketData) -> bool:
        """åˆ¤æ–­æ˜¯å¦åº”è¯¥ä¹°å…¥"""
        # ä½ çš„ä¹°å…¥é€»è¾‘
        return False

    def calculate_size(self) -> float:
        """è®¡ç®—è®¢å•å¤§å°"""
        # ä½ çš„ä»“ä½è®¡ç®—é€»è¾‘
        return 0.01
```

#### 2. æ³¨å†Œç­–ç•¥

åœ¨`src/core/engine.py`ä¸­æ³¨å†Œç­–ç•¥ï¼š

```python
from strategies.my_strategy import MyStrategy

# ç­–ç•¥æ˜ å°„
STRATEGIES = {
    "grid": BasicGridStrategy,
    "my_strategy": MyStrategy,  # æ·»åŠ ä½ çš„ç­–ç•¥
}
```

#### 3. åˆ›å»ºé…ç½®æ–‡ä»¶

åœ¨`bots/`ç›®å½•åˆ›å»ºé…ç½®ï¼š

```yaml
# bots/my_strategy_config.yaml
name: "my_strategy_btc"
active: true

exchange:
  type: "hyperliquid"
  testnet: true

strategy:
  type: "my_strategy"  # ç­–ç•¥ç±»å‹
  # ä½ çš„ç­–ç•¥å‚æ•°
  param1: value1
  param2: value2

account:
  max_allocation_pct: 10.0

risk_management:
  stop_loss_enabled: true
  stop_loss_pct: 5.0
```

#### 4. æµ‹è¯•ç­–ç•¥

```bash
# éªŒè¯é…ç½®
uv run src/run_bot.py --validate bots/my_strategy_config.yaml

# è¿è¡Œç­–ç•¥
uv run src/run_bot.py bots/my_strategy_config.yaml
```

### æ·»åŠ æ–°äº¤æ˜“æ‰€

#### 1. åˆ›å»ºé€‚é…å™¨

å®ç°`ExchangeAdapter`æ¥å£ï¼š

```python
# src/exchanges/new_exchange/adapter.py
from interfaces.exchange import ExchangeAdapter, Order, OrderSide, OrderType
from typing import List, Optional, Dict

class NewExchangeAdapter(ExchangeAdapter):
    """æ–°äº¤æ˜“æ‰€é€‚é…å™¨"""

    def __init__(self, api_key: str, api_secret: str, testnet: bool = True):
        self.api_key = api_key
        self.api_secret = api_secret
        self.testnet = testnet
        self.client = None

    async def connect(self) -> None:
        """å»ºç«‹è¿æ¥"""
        # åˆå§‹åŒ–äº¤æ˜“æ‰€å®¢æˆ·ç«¯
        pass

    async def place_order(
        self,
        symbol: str,
        side: OrderSide,
        order_type: OrderType,
        size: float,
        price: Optional[float] = None
    ) -> Order:
        """ä¸‹å•"""
        # è°ƒç”¨äº¤æ˜“æ‰€API
        pass

    # å®ç°å…¶ä»–æ¥å£æ–¹æ³•...
```

#### 2. åˆ›å»ºå¸‚åœºæ•°æ®æä¾›è€…

```python
# src/exchanges/new_exchange/market_data.py
from typing import Callable, Dict
from interfaces.strategy import MarketData

class NewExchangeMarketData:
    """æ–°äº¤æ˜“æ‰€å¸‚åœºæ•°æ®"""

    def __init__(self, testnet: bool = True):
        self.testnet = testnet
        self.subscriptions: Dict[str, Callable] = {}

    async def start(self) -> None:
        """å¯åŠ¨WebSocketè¿æ¥"""
        pass

    def subscribe(self, symbol: str, callback: Callable) -> None:
        """è®¢é˜…ä»·æ ¼æ›´æ–°"""
        self.subscriptions[symbol] = callback

    async def stop(self) -> None:
        """åœæ­¢è¿æ¥"""
        pass
```

#### 3. æ³¨å†Œäº¤æ˜“æ‰€

åœ¨`src/core/engine.py`ä¸­æ³¨å†Œï¼š

```python
from exchanges.new_exchange import NewExchangeAdapter

EXCHANGES = {
    "hyperliquid": HyperliquidAdapter,
    "new_exchange": NewExchangeAdapter,  # æ·»åŠ æ–°äº¤æ˜“æ‰€
}
```

#### 4. æ›´æ–°é…ç½®æ¨¡å¼

åœ¨`src/core/enhanced_config.py`ä¸­æ·»åŠ éªŒè¯ï¼š

```python
SUPPORTED_EXCHANGES = ["hyperliquid", "hl", "new_exchange"]
```

### æµ‹è¯•è¦æ±‚

#### å•å…ƒæµ‹è¯•

```python
# tests/test_my_strategy.py
import pytest
from strategies.my_strategy import MyStrategy

@pytest.mark.asyncio
async def test_strategy_initialization():
    """æµ‹è¯•ç­–ç•¥åˆå§‹åŒ–"""
    config = {"param1": "value1"}
    strategy = MyStrategy(config)
    assert strategy.config == config

@pytest.mark.asyncio
async def test_buy_signal():
    """æµ‹è¯•ä¹°å…¥ä¿¡å·"""
    strategy = MyStrategy({})
    data = MarketData(
        symbol="BTC",
        timestamp=time.time(),
        price=40000.0,
        volume_24h=1000000.0
    )

    signals = await strategy.on_market_data(data)
    assert len(signals) > 0
    assert signals[0].signal_type == SignalType.BUY
```

è¿è¡Œæµ‹è¯•ï¼š
```bash
uv run pytest tests/
```

#### é›†æˆæµ‹è¯•

åœ¨æµ‹è¯•ç½‘ä¸Šæµ‹è¯•å®Œæ•´æµç¨‹ï¼š

```bash
# 1. éªŒè¯é…ç½®
uv run src/run_bot.py --validate bots/test_config.yaml

# 2. çŸ­æ—¶é—´è¿è¡Œ
# æ‰‹åŠ¨åœæ­¢åæ£€æŸ¥æ—¥å¿—å’Œè®¢å•

# 3. éªŒè¯è¡Œä¸º
# - è®¢å•æ˜¯å¦æ­£ç¡®ä¸‹è¾¾ï¼Ÿ
# - é£é™©ç®¡ç†æ˜¯å¦ç”Ÿæ•ˆï¼Ÿ
# - æ—¥å¿—æ˜¯å¦å®Œæ•´ï¼Ÿ
```

---

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. WebSocketè¿æ¥å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
Error: WebSocket connection failed
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping api.hyperliquid-testnet.xyz

# æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
# ç¡®ä¿å…è®¸WebSocketè¿æ¥ï¼ˆç«¯å£443ï¼‰

# å°è¯•ä½¿ç”¨ä»£ç†
export HTTPS_PROXY=http://proxy:port
```

#### 2. è®¢å•è¢«æ‹’ç»

**ç—‡çŠ¶**ï¼š
```
Order rejected: insufficient balance
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# æ£€æŸ¥è´¦æˆ·ä½™é¢
uv run learning_examples/03_account_info/get_user_state.py

# å‡å°è®¢å•å¤§å°
# åœ¨é…ç½®ä¸­è°ƒæ•´ max_allocation_pct

# æ£€æŸ¥æœ€å°è®¢å•é‡
uv run learning_examples/02_market_data/get_market_metadata.py
```

#### 3. ç²¾åº¦é”™è¯¯

**ç—‡çŠ¶**ï¼š
```
Order rejected: invalid price precision
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# BTCéœ€è¦5ä½å°æ•°
price = round(40123.456789, 5)  # â†’ 40123.45679

# æŸ¥çœ‹äº¤æ˜“å¯¹ç²¾åº¦è¦æ±‚
metadata = adapter.get_market_metadata()
print(metadata['BTC']['szDecimals'])  # å¤§å°ç²¾åº¦
print(metadata['BTC']['priceDecimals'])  # ä»·æ ¼ç²¾åº¦
```

#### 4. ç§é’¥é”™è¯¯

**ç—‡çŠ¶**ï¼š
```
Error: Invalid private key format
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ç¡®ä¿ç§é’¥æ ¼å¼æ­£ç¡®
# æ­£ç¡®: 0x1234567890abcdef...
# é”™è¯¯: 1234567890abcdef...

# æ£€æŸ¥.envæ–‡ä»¶
cat .env | grep PRIVATE_KEY

# ç¡®ä¿æ²¡æœ‰å¼•å·
# é”™è¯¯: HYPERLIQUID_TESTNET_PRIVATE_KEY="0x..."
# æ­£ç¡®: HYPERLIQUID_TESTNET_PRIVATE_KEY=0x...
```

### è°ƒè¯•æŠ€å·§

#### å¯ç”¨è¯¦ç»†æ—¥å¿—

```yaml
# åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®
monitoring:
  log_level: "DEBUG"
```

æˆ–é€šè¿‡ç¯å¢ƒå˜é‡ï¼š
```bash
LOG_LEVEL=DEBUG uv run src/run_bot.py
```

#### æ£€æŸ¥è®¢å•çŠ¶æ€

```python
# æŸ¥çœ‹æ‰€æœ‰æœªæˆäº¤è®¢å•
uv run learning_examples/03_account_info/get_open_orders.py

# æŸ¥çœ‹è´¦æˆ·çŠ¶æ€
uv run learning_examples/03_account_info/get_user_state.py
```

#### ç›‘æ§WebSocketæ¶ˆæ¯

```bash
# æŸ¥çœ‹åŸå§‹WebSocketæ¶ˆæ¯
uv run learning_examples/06_copy_trading/print_raw_websocket_messages.py
```

#### éªŒè¯é…ç½®

```bash
# è¿è¡Œå‰éªŒè¯
uv run src/run_bot.py --validate bots/your_config.yaml
```

### æ€§èƒ½ä¼˜åŒ–

#### 1. å‡å°‘APIè°ƒç”¨

```python
# ä¸å¥½ï¼šæ¯æ¬¡éƒ½æŸ¥è¯¢
for symbol in symbols:
    price = await adapter.get_price(symbol)  # Næ¬¡APIè°ƒç”¨

# å¥½ï¼šæ‰¹é‡æŸ¥è¯¢
prices = await adapter.get_all_prices()  # 1æ¬¡APIè°ƒç”¨
```

#### 2. ä½¿ç”¨WebSocketè€Œéè½®è¯¢

```python
# ä¸å¥½ï¼šè½®è¯¢ä»·æ ¼
while True:
    price = await adapter.get_price("BTC")
    await asyncio.sleep(1)

# å¥½ï¼šWebSocketæ¨é€
market_data.subscribe("BTC", on_price_update)
```

#### 3. ä¼˜åŒ–ç½‘æ ¼å±‚çº§

```yaml
# å±‚çº§è¿‡å¤šä¼šå¢åŠ è®¢å•ç®¡ç†å¼€é”€
grid:
  levels: 15  # åˆç†
  # levels: 50  # é¿å…ï¼ˆæ€§èƒ½å·®ï¼‰
```

#### 4. åˆç†è®¾ç½®å†å¹³è¡¡é˜ˆå€¼

```yaml
# è¿‡ä½çš„é˜ˆå€¼ä¼šå¯¼è‡´é¢‘ç¹å†å¹³è¡¡
rebalance:
  price_move_threshold_pct: 10.0  # åˆç†
  # price_move_threshold_pct: 3.0  # é¿å…ï¼ˆé¢‘ç¹ï¼‰
```

---

## ğŸ”’ å®‰å…¨æœ€ä½³å®è·µ

### ç§é’¥ç®¡ç†

#### âœ… æ­£ç¡®åšæ³•

1. **ä½¿ç”¨ç¯å¢ƒå˜é‡**
```bash
# .envæ–‡ä»¶ï¼ˆä¸æäº¤åˆ°gitï¼‰
HYPERLIQUID_TESTNET_PRIVATE_KEY=0x...
```

2. **ä½¿ç”¨ä¸“ç”¨æµ‹è¯•è´¦æˆ·**
```
- æµ‹è¯•ç½‘ä½¿ç”¨ä¸“ç”¨ç§é’¥
- ä¸»ç½‘ä½¿ç”¨ç‹¬ç«‹è´¦æˆ·ï¼ˆä¸è¦ç”¨ä¸»è´¦æˆ·ï¼‰
- é™åˆ¶è´¦æˆ·èµ„é‡‘ï¼ˆåªå­˜æ”¾äº¤æ˜“æ‰€éœ€é‡‘é¢ï¼‰
```

3. **è½®æ¢ç§é’¥**
```
- å®šæœŸæ›´æ¢ç§é’¥
- æ³„éœ²åç«‹å³è½®æ¢
- ä½¿ç”¨ç¡¬ä»¶é’±åŒ…ç”Ÿæˆ
```

#### âŒ é”™è¯¯åšæ³•

```python
# ä¸è¦ç¡¬ç¼–ç ç§é’¥
PRIVATE_KEY = "0x1234..."  # å±é™©ï¼

# ä¸è¦æäº¤.envåˆ°git
git add .env  # å±é™©ï¼

# ä¸è¦åœ¨æ—¥å¿—ä¸­æ‰“å°ç§é’¥
logger.info(f"Key: {private_key}")  # å±é™©ï¼
```

### APIå¯†é’¥å®‰å…¨

```bash
# ä½¿ç”¨åªè¯»APIå¯†é’¥è¿›è¡ŒæŸ¥è¯¢
# äº¤æ˜“ä½¿ç”¨æƒé™æœ€å°çš„APIå¯†é’¥

# é™åˆ¶APIå¯†é’¥IPç™½åå•
# åœ¨äº¤æ˜“æ‰€è®¾ç½®ä¸­æ·»åŠ æœåŠ¡å™¨IP
```

### èµ„é‡‘å®‰å…¨

#### 1. åˆ†é˜¶æ®µéƒ¨ç½²

```
é˜¶æ®µ1: æµ‹è¯•ç½‘ â†’ éªŒè¯ç­–ç•¥é€»è¾‘
é˜¶æ®µ2: ä¸»ç½‘å°é¢ â†’ éªŒè¯çœŸå®ç¯å¢ƒ
é˜¶æ®µ3: é€æ­¥å¢åŠ  â†’ æ‰©å¤§èµ„é‡‘è§„æ¨¡
```

#### 2. è®¾ç½®ç¡¬é™åˆ¶

```yaml
# é™åˆ¶æœ€å¤§åˆ†é…
account:
  max_allocation_pct: 10.0  # æœ€å¤š10%

# å¯ç”¨å›æ’¤ä¿æŠ¤
risk_management:
  max_drawdown_pct: 15.0
```

#### 3. ç›‘æ§å’Œå‘Šè­¦

```python
# å®ç°è´¦æˆ·ç›‘æ§
if current_balance < initial_balance * 0.9:
    send_alert("è´¦æˆ·ä½™é¢ä¸‹é™10%")

if unrealized_pnl < -max_loss:
    send_alert("è§¦å‘æœ€å¤§æŸå¤±")
    stop_trading()
```

### æ—¥å¿—å®‰å…¨

#### å®‰å…¨çš„æ—¥å¿—å®è·µ

```python
# ä¸è¦è®°å½•æ•æ„Ÿä¿¡æ¯
logger.info(f"Order placed: {order.order_id}")  # âœ…

# ä¸è¦è®°å½•ç§é’¥æˆ–å¯†é’¥
logger.info(f"Using key: {private_key}")  # âŒ

# è¿‡æ»¤æ•æ„Ÿå­—æ®µ
safe_config = {k: v for k, v in config.items()
               if k not in ['private_key', 'api_secret']}
logger.info(f"Config: {safe_config}")  # âœ…
```

### ç½‘ç»œå®‰å…¨

```bash
# ä½¿ç”¨HTTPSå’ŒWSS
# Hyperliquidé»˜è®¤ä½¿ç”¨åŠ å¯†è¿æ¥

# è€ƒè™‘ä½¿ç”¨VPN
# ç‰¹åˆ«æ˜¯åœ¨å…¬å…±ç½‘ç»œä¸Šè¿è¡Œæ—¶

# å¯ç”¨é˜²ç«å¢™
# åªå…è®¸å¿…è¦çš„å‡ºç«™è¿æ¥
```

---

## ğŸ—ºï¸ è·¯çº¿å›¾

### å·²å®Œæˆ âœ…

- [x] åŸºç¡€ç½‘æ ¼äº¤æ˜“ç­–ç•¥
- [x] Hyperliquid DEXé›†æˆ
- [x] ç°è´§äº¤æ˜“æ”¯æŒ
- [x] æ°¸ç»­åˆçº¦æ”¯æŒ
- [x] WebSocketå®æ—¶æ•°æ®
- [x] é£é™©ç®¡ç†ç³»ç»Ÿ
- [x] é…ç½®åŒ–æ¶æ„
- [x] å­¦ä¹ ç¤ºä¾‹å¥—ä»¶
- [x] èµ„é‡‘è´¹ç‡ç›‘æ§

### å¼€å‘ä¸­ ğŸš§

- [ ] å›æµ‹ç³»ç»Ÿ
- [ ] æ€§èƒ½åˆ†æå·¥å…·
- [ ] Webç›‘æ§ç•Œé¢
- [ ] å¤šç­–ç•¥å¹¶è¡Œ

### è®¡åˆ’ä¸­ ğŸ“‹

#### ç­–ç•¥å¢å¼º
- [ ] åŠ¨æ€ç½‘æ ¼ï¼ˆè‡ªé€‚åº”å±‚çº§å’ŒèŒƒå›´ï¼‰
- [ ] é©¬ä¸æ ¼å°”ç­–ç•¥
- [ ] DCAï¼ˆå®šæŠ•ï¼‰ç­–ç•¥
- [ ] å¥—åˆ©ç­–ç•¥ï¼ˆç°è´§-æ°¸ç»­ï¼‰
- [ ] è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥

#### äº¤æ˜“æ‰€é›†æˆ
- [ ] å¸å®‰é›†æˆ
- [ ] OKXé›†æˆ
- [ ] Bybité›†æˆ

#### åŠŸèƒ½å¢å¼º
- [ ] è®¢å•ç°¿æ·±åº¦åˆ†æ
- [ ] æ»‘ç‚¹ä¼˜åŒ–
- [ ] æ™ºèƒ½è®¢å•è·¯ç”±
- [ ] å¤åˆ¶äº¤æ˜“åŠŸèƒ½
- [ ] Telegramé€šçŸ¥

#### åˆ†æå·¥å…·
- [ ] ç­–ç•¥å›æµ‹å¼•æ“
- [ ] æ€§èƒ½æŠ¥å‘Šç”Ÿæˆ
- [ ] é£é™©åˆ†æä»ªè¡¨æ¿
- [ ] äº¤æ˜“æ—¥å¿—åˆ†æ

#### åŸºç¡€è®¾æ–½
- [ ] Dockerå®¹å™¨åŒ–
- [ ] äº‘éƒ¨ç½²æŒ‡å—
- [ ] ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ
- [ ] æ•°æ®åº“é›†æˆï¼ˆæŒä¹…åŒ–ï¼‰

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ï¼æœ¬é¡¹ç›®æ­£åœ¨ç§¯æå¼€å‘ä¸­ã€‚

### å¦‚ä½•è´¡çŒ®

#### 1. æŠ¥å‘Šé—®é¢˜

åœ¨GitHub Issuesä¸­æŠ¥å‘Šï¼š
- BugæŠ¥å‘Š
- åŠŸèƒ½è¯·æ±‚
- æ–‡æ¡£æ”¹è¿›å»ºè®®

#### 2. æäº¤ä»£ç 

```bash
# 1. Forkä»“åº“
# 2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/my-feature

# 3. æäº¤æ›´æ”¹
git commit -m "feat: add my feature"

# 4. æ¨é€åˆ°åˆ†æ”¯
git push origin feature/my-feature

# 5. åˆ›å»ºPull Request
```

#### 3. ä»£ç å®¡æŸ¥æ¸…å•

æäº¤å‰ç¡®ä¿ï¼š
- [ ] ä»£ç é€šè¿‡æ‰€æœ‰æµ‹è¯•
- [ ] æ·»åŠ äº†æ–°æµ‹è¯•ï¼ˆå¦‚æœé€‚ç”¨ï¼‰
- [ ] æ›´æ–°äº†æ–‡æ¡£
- [ ] éµå¾ªä»£ç é£æ ¼æŒ‡å—
- [ ] é€šè¿‡ç±»å‹æ£€æŸ¥ï¼ˆmypyï¼‰
- [ ] æ ¼å¼åŒ–ä»£ç ï¼ˆblack, isortï¼‰

### æäº¤æ¶ˆæ¯è§„èŒƒ

ä½¿ç”¨[Conventional Commits](https://www.conventionalcommits.org/)ï¼š

```
feat: æ·»åŠ æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
refactor: é‡æ„ï¼ˆä¸ä¿®å¤bugæˆ–æ·»åŠ åŠŸèƒ½ï¼‰
test: æ·»åŠ æµ‹è¯•
chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·å˜åŠ¨
```

ç¤ºä¾‹ï¼š
```bash
git commit -m "feat(strategies): add martingale strategy"
git commit -m "fix(risk): correct drawdown calculation"
git commit -m "docs(readme): update installation steps"
```

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å®‰è£…å¼€å‘ä¾èµ–
uv sync --all-extras

# è¿è¡Œæµ‹è¯•
uv run pytest

# ä»£ç æ ¼å¼åŒ–
uv run black src/
uv run isort src/

# ç±»å‹æ£€æŸ¥
uv run mypy src/
```

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ **MITè®¸å¯è¯**ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ™ è‡´è°¢

### æŠ€æœ¯æ ˆ
- [Hyperliquid](https://hyperliquid.xyz) - é«˜æ€§èƒ½å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€
- [uv](https://github.com/astral-sh/uv) - å¿«é€ŸPythonåŒ…ç®¡ç†å™¨
- [hyperliquid-python-sdk](https://github.com/hyperliquid-dex/python-sdk) - å®˜æ–¹Python SDK

### æ–‡æ¡£å’Œèµ„æº
- [Chainstack Developer Portal](https://docs.chainstack.com/docs/developer-portal-mcp-server) - Hyperliquid APIæ–‡æ¡£
- [Chainstack Hyperliquid Faucet](https://faucet.chainstack.com/hyperliquid-testnet-faucet) - æµ‹è¯•ç½‘æ°´é¾™å¤´

### ç¤¾åŒº
æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œç¤¾åŒºæˆå‘˜çš„æ”¯æŒï¼

---

## ğŸ“ æ”¯æŒå’Œç¤¾åŒº

### è·å–å¸®åŠ©

- **GitHub Issues**: [æäº¤é—®é¢˜](https://github.com/chainstacklabs/hyperliquid-trading-bot/issues)
- **è®¨è®º**: [GitHub Discussions](https://github.com/chainstacklabs/hyperliquid-trading-bot/discussions)

### ä¿æŒè”ç³»

- å…³æ³¨é¡¹ç›®è·å–æ›´æ–°
- â­ Staræœ¬ä»“åº“ä»¥ç¤ºæ”¯æŒ
- ğŸ”” Watchæ¥æ”¶é€šçŸ¥

---

<div align="center">

**å…è´£å£°æ˜**

æœ¬è½¯ä»¶æŒ‰"åŸæ ·"æä¾›ï¼Œä¸æä¾›ä»»ä½•æ˜ç¤ºæˆ–æš—ç¤ºçš„ä¿è¯ã€‚ä½œè€…ä¸å¯¹ä½¿ç”¨æœ¬è½¯ä»¶é€ æˆçš„ä»»ä½•æŸå¤±è´Ÿè´£ã€‚åŠ å¯†è´§å¸äº¤æ˜“æ¶‰åŠé‡å¤§é£é™©ï¼Œè¯·è°¨æ…æ“ä½œã€‚

---

**ç”¨â¤ï¸æ„å»º** | [GitHub](https://github.com/chainstacklabs/hyperliquid-trading-bot) | [Chainstack](https://chainstack.com)

</div>
